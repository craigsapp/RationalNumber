<script src="/javascripts/RationalNumber-base-0.0.0.min.js"></script>
<script src="/javascripts/RationalNumber-math-0.0.0.min.js"></script>
<script>
   function updateFractions() {
      var state1 = createFraction('1');
      var state2 = createFraction('2');
      if (state1 && state2) {
         updateMath();
      } else  {
         clearMath();
      }
   }

   function createFraction(ext) {
      var numerator   = document.getElementById('numerator'+ext).value;
      var denominator = document.getElementById('denominator'+ext).value;
      var rn = new RationalNumber();
      rn.setValueNoReduce(numerator, denominator);
      var outputplain = document.getElementById('resultplain'+ext);
      var outputmixed = document.getElementById('resultmixed'+ext);
      var outputfloat = document.getElementById('resultfloat'+ext);
      var outputerror = document.getElementById('errormsg'+ext);
      if (!rn.isSafe()) {
         outputerror.textContent = 'Error: number out of range';
         outputerror.style.color = 'red';
         outputplain.textContent = '';
         outputmixed.textContent = '';
         outputfloat.textContent = '';
         return false;
      } else {
         rn.reduce();
         outputerror.textContent = '';
         outputplain.textContent = rn;
         outputmixed.textContent = rn.toStringMixed();
         outputfloat.textContent = Number(rn);
         return true;
      }
   }

   function updateMath() {
      var n1 = document.getElementById('numerator1').value;
      var d1 = document.getElementById('denominator1').value;
      var n2 = document.getElementById('numerator2').value;
      var d2 = document.getElementById('denominator2').value;
      var rn1 = new RationalNumber(n1, d1);
      var rn2 = new RationalNumber(n2, d2);
      var mathadd = document.getElementById('mathadd');
      var mathsub = document.getElementById('mathsub');
      var mathmul = document.getElementById('mathmul');
      var mathdiv = document.getElementById('mathdiv');
      var mathinv = document.getElementById('mathinv');

      var rnadd = new RationalNumber(n1, d1);
      rnadd.addTo(rn2);
      var addout = "";
      addout += String(rn1) + "&nbsp;&nbsp;+&nbsp;&nbsp;";
      addout += String(rn2) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      addout += String(rnadd);
      mathadd.innerHTML = addout;

      var rnsub = new RationalNumber(n1, d1);
      rnsub.subtractTo(rn2);
      var subout = "";
      subout += String(rn1) + "&nbsp;&nbsp;&ndash;&nbsp;&nbsp;";
      subout += String(rn2) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      subout += String(rnsub);
      mathsub.innerHTML = subout;

      var rnmul = new RationalNumber(n1, d1);
      rnmul.multiplyTo(rn2);
      var mulout = "";
      mulout += String(rn1) + "&nbsp;&nbsp;*&nbsp;&nbsp;";
      mulout += String(rn2) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      mulout += String(rnmul);
      mathmul.innerHTML = mulout;

      var rndiv = new RationalNumber(n1, d1);
      rndiv.divideTo(rn2);
      var divout = "";
      divout += String(rn1) + "&nbsp;&nbsp;&divide;&nbsp;&nbsp;";
      divout += String(rn2) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      divout += String(rndiv);
      mathdiv.innerHTML = divout;

      var invout = "";
      invout += 1 + "&nbsp;&nbsp;&divide;&nbsp;&nbsp;";
      invout += String(rn1) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      invout += String(rn1.getInversion()) + ",&nbsp;&nbsp;&nbsp;&nbsp;";
      invout += 1 + "&nbsp;&nbsp;&divide;&nbsp;&nbsp;";
      invout += String(rn2) + "&nbsp;&nbsp;=&nbsp;&nbsp;";
      invout += String(rn2.getInversion());
      mathinv.innerHTML = invout;
   }

   function clearMath() {
      document.getElementById('mathadd').textContent = '';
      document.getElementById('mathsub').textContent = '';
      document.getElementById('mathmul').textContent = '';
      document.getElementById('mathdiv').textContent = '';
      document.getElementById('mathinv').textContent = '';
   }

</script>

<style type="text/css">
   div.rat {
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 50px;
   }
   div.rat h1 {
      font-size: 160%;
      text-align: center;
      font-family: sans-serif;
      color: #309;
   }
   table.rat td:first-child {
      text-align: right;
   }
   table.rat2 > tbody > td {
      border: none;
   }
   td.fixw {
      width: 200px;
   }
</style>

</head>
<body>

<div class=rat>
<h1>Rational number creation demonstration</h1>

<table class=rat>
<tr style="vertical-align:top;"><td>
<table class=rat2>
<tr>
   <td style="text-align:right;">
      numerator&nbsp;1:
   </td>
   <td>
      <input size=15 type=text onkeyup="updateFractions();" id=numerator1><br>
   </td>
</tr>
<tr>
   <td>
      denominator&nbsp;1:
   </td>
   <td>
      <input size=15 type=text onkeyup="updateFractions()" id=denominator1><br>
   </td>
</tr>
<tr>
   <td colspan=2>
      <div id=errormsg1></div>
   </td>
</tr>
</table>
</td><td>
<table class=rat2>
<tr>
   <td>
      Rational&nbsp;number:
   </td>
   <td class=fixw>
      <div id=resultplain1></div>
   </td>
</tr>
<tr>
   <td>
      Mixed&nbsp;fraction:
   </td>
   <td class=fixw>
      <div id=resultmixed1></div>
   </td>
</tr>
<tr>
   <td>
   Floating-point:
   </td>
   <td class=fixw>
      <div id=resultfloat1></div>
   </td>
</tr>
</table>
</td></tr>

<tr><td colspan=2><hr noshade></td></tr>
<tr style="vertical-align:top;"><td>
<table class=rat>
<tr>
   <td style="text-align:right;">
      numerator&nbsp;2:
   </td>
   <td>
      <input size=15 type=text onkeyup="updateFractions();" id=numerator2><br>
   </td>
</tr>
<tr>
   <td>
      denominator&nbsp;2:
   </td>
   <td>
      <input size=15 type=text onkeyup="updateFractions();" id=denominator2><br>
   </td>
</tr>
<tr>
   <td colspan=2>
      <div id=errormsg2></div>
   </td>
</tr>
</table>
</td><td>
<table>
<tr>
   <td>
      rational&nbsp;number:
   </td>
   <td class=fixw>
      <div id=resultplain2></div>
   </td>
</tr>
<tr>
   <td>
      mixed&nbsp;fraction:
   </td>
   <td class=fixw>
      <div id=resultmixed2></div>
   </td>
</tr>
<tr>
   <td>
   floating-point:
   </td>
   <td class=fixw>
      <div id=resultfloat2></div>
   </td>
</tr>
</table>
</td></tr>
</table>

</div>

<div class=rat>
<h1>Rational number math demonstration</h1>

<table>
<tr><td>Addition:      </td><td> <div id=mathadd></div> </td></tr>
<tr><td>Subtraction:   </td><td> <div id=mathsub></div> </td></tr>
<tr><td>Multiplication:</td><td> <div id=mathmul></div> </td></tr>
<tr><td>Division:      </td><td> <div id=mathdiv></div> </td></tr>
<tr><td>Inversions:    </td><td> <div id=mathinv></div> </td></tr>
</table>

</div>
