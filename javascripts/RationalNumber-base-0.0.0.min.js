"use strict";function RationalNumber(t,e){return arguments.length?arguments[0]instanceof RationalNumber?(this._n=arguments[0]._n,this._d=arguments[0]._d,this._s=arguments[0]._s):1===arguments.length&&"string"==typeof arguments[0]?this.fromString(arguments[0]):2===arguments.length?this.setValue(t,e):1===arguments.length&&(this.setNumeratorNoReduce(t),this._d=1):(this._n=0,this._d=1,this._s=1),this}RationalNumber.prototype._overflowCheck=!1,RationalNumber.prototype.setSign=function(t){return this._s="number"==typeof t?0>t?-1:1:"string"==typeof t?"-"===t?-1:"negative"===t?-1:"minus"===t?-1:1:1,this},RationalNumber.prototype.getSign=function(){return 0>this._s?-1:1},RationalNumber.prototype.getNumerator=function(){return this._s>=0?this._n:-this._n},RationalNumber.prototype.getNumeratorAbsoluteValue=function(){return this._n},RationalNumber.prototype.getDenominator=function(){return this._d},RationalNumber.prototype.setNumeratorNoReduce=function(t){return this._n=parseInt(t)||0,0>this._n?(this._s=-1,this._n=-this._n):this._s=1,this._overflowCheck&&this.checkOverflow(),this},RationalNumber.prototype.setNumerator=function(t){return this.setNumeratorNoReduce(t),this.reduce(),this},RationalNumber.prototype.setNumeratorAbsoluteValueNoReduce=function(t){return this._n=Math.abs(parseInt(t)||0),this._overflowCheck&&this.checkOverflow(),this},RationalNumber.prototype.setDenominatorAbsoluteValue=function(t){return this.setDenominatorAbsoluteValueNoReduce(t),this.reduce(),this},RationalNumber.prototype.setDenominatorAbsoluteValueNoReduce=function(t){return t=t===void 0?1:parseInt(t)||0,this._d=Math.abs(t),this._overflowCheck&&this.checkOverflow(),this},RationalNumber.prototype.reduce=function(){var t=this._n,e=this._d;if(1===t||1===e)return this;if(0===t)return 0!==e&&(this._d=1),this;if(0===e)return 0!==t&&(this._n=1),this;var r=this.gcdIterative(t,e);return r>1&&(this._n/=r,this._d/=r,this._overflowCheck&&this.checkOverflow()),this},RationalNumber.prototype.setValue=function(){return RationalNumber.prototype.setValueNoReduce.apply(this,arguments).reduce()},RationalNumber.prototype.setValueNoReduce=function(t,e){if(1==arguments.length){if(arguments[0]instanceof RationalNumber)return this._n=arguments[0]._n,this._d=arguments[0]._d,this._s=arguments[0]._s,this;if("string"==typeof arguments[0])return this.fromStringNoReduce(arguments[0]),this}return t=parseInt(t)||0,e=e===void 0||"string"==typeof e&&""===e?1:parseInt(e)||0,0>e&&(e=-e,t=-t),this.setNumeratorNoReduce(t),this.setDenominatorAbsoluteValueNoReduce(e),this},RationalNumber.prototype.isSafe=function(){var t,e;if(arguments.length>0){if("number"==typeof arguments[0])t=Math.abs(parseInt(arguments[0])),e=Math.abs(parseInt(arguments[1]||0));else if(arguments[0]instanceof RationalNumber)t=arguments[0].getNumeratorAbsoluteValue(),e=arguments[0].getDenominator();else if("string"==typeof arguments[0]){var r=new RationalNumber(arguments[0]);t=r.getNumerator(),e=r.getDenominator()}}else t=this.getNumeratorAbsoluteValue(),e=this.getDenominator();var n=Number.MAX_SAFE_INTEGER||9007199254740991;return 0>t||t>n||0>e||e>n?!1:!0},RationalNumber.prototype.isNan=function(){return 0===this._d&&0===this._n?!0:!1},RationalNumber.prototype.isInfinite=function(){return 0===this._d&&this._n>0?!0:!1},RationalNumber.prototype.isValid=function(){return this.isSafe()&&!this.isNan()&&!this.isInfinite()},RationalNumber.prototype.checkOverflow=function(){if(!this.isSafe())throw Error("RationalNumber is not safe: "+(this+""));return!1},RationalNumber.prototype.checkOverflowOn=function(){RationalNumber.prototype._overflowCheck=!0},RationalNumber.prototype.checkOverflowOff=function(){RationalNumber.prototype._overflowCheck=!1},RationalNumber.prototype.valueOf=function(){return this.getNumerator()/this.getDenominator()},RationalNumber.prototype.toFloat=RationalNumber.prototype.valueOf,RationalNumber.prototype.toNumber=RationalNumber.prototype.valueOf,RationalNumber.prototype.toString=function(){return 1===this.getDenominator()?""+this.getNumerator():this.getNumerator()+"/"+this.getDenominator()},RationalNumber.prototype.toStringMixed=function(){var t=this.getNumerator(),e=this.getDenominator(),r="+",n="-",o="",i="";switch(arguments.length){case 0:break;case 1:r=arguments[0]+"",n=r;break;case 2:r=arguments[0]+"",n=arguments[1]+"";case 3:r=arguments[0]+"",n=arguments[1]+"",o=arguments[2]+"";case 4:default:r=arguments[0]+"",n=arguments[1]+"",o=arguments[2]+"",i=arguments[3]+""}if(1===e)return""+this.getNumerator();if(0===e)return 0===t?o+0/0+i:o+(0>this._s?"-":"")+1/0+i;var a=Math.floor(Math.abs(t/e));return 0===a?o+t+"/"+e+i:t>0?(t-=a*e,o+a+r+t+"/"+e+i):(t+=a*e,o+-a+n+Math.abs(t)+"/"+e+i)},RationalNumber.prototype.toJSON=function(t,e){t===void 0&&(t="n"),e===void 0&&(e="d"),t='"'+t+'":',e='"'+e+'":';var r=this.getNumeratorAbsoluteValue(),n=this.getDenominator(),o=0>this._s?"-":"";return"{"+t+o+r+(1===n?"":", "+e+n)+"}"},RationalNumber.prototype.fromString=function(){return RationalNumber.prototype.fromStringNoReduce.apply(this,arguments).reduce()},RationalNumber.prototype.fromStringNoReduce=function(t){var e,r;if("string"!=typeof t)t+="";else{if("NaN"===t)return this.setValueNoReduce(0,0),this;if("Infinity"===t)return this.setValueNoReduce(1,0),this;if("-Infinity"===t)return this.setValueNoReduce(-1,0),this}var n=t.match(/([+-]?\d+)[-+ _](\d+)(\.\d*)?\/(\d+)(\.\d*)?/);if(n){e=parseInt(n[2]),r=parseInt(n[4]);var o=parseInt(n[1]);0>o?e=-e+r*o:e+=r*o,this.setValueNoReduce(e,r)}else n=t.match(/([-+]?\d+)(\.\d*)?\/([-+]?\d+)(\.\d*)?/),n?(e=parseInt(n[1]),r=parseInt(n[3])):(e=parseInt(t)||0,r=1),this.setValueNoReduce(e,r);return this},RationalNumber.prototype.parseString=function(t){return new RationalNumber(t)},RationalNumber.prototype.clone=function(){return new RationalNumber(this)},RationalNumber.prototype.copy=function(t){if(!(t instanceof RationalNumber))throw Error("Input to RationalNumber.prototype.copy is invalid");this._n=t._n,this._d=t._d,this._s=t._s},RationalNumber.prototype.gcdRecursive=function(t,e){return e?this.gcdRecursive(e,t%e):Math.abs(t)},RationalNumber.prototype.gcdIterative=function(t,e){if(t=Math.abs(t),e=Math.abs(e),!t)return e;if(!e)return t;if(e>t){var r=t;t=e,e=r}for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}},RationalNumber.prototype.isEqual=function(t){return t===void 0?!1:(t instanceof RationalNumber||(t=new RationalNumber(t)),this._n===t._n&&this._d===t._d&&this._s===t._s?!0:!1)},RationalNumber.prototype.isPositive=function(){return this._s>0&&this._n>0?!0:!1},RationalNumber.prototype.isNegative=function(){return 0>this._s&&this._n>0?!0:!1},RationalNumber.prototype.isInteger=function(){return 1===this._d?!0:!1},"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=RationalNumber);